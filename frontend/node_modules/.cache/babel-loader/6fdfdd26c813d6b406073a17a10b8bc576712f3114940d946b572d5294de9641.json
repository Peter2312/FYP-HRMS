{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'./styles/EmployeeDashboard.css';import{logout}from'./logout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EmployeeDashboard(){const[employee,setEmployee]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchEmployeeData=async()=>{try{// Retrieve the token from localStorage\nconst token=localStorage.getItem('token');// If no token is found, redirect to login\nif(!token){navigate('/login');return;}// Send the token in the authorization header\nconst response=await axios.get('http://localhost:5000/api/employees/me',{headers:{Authorization:`Bearer ${token}`}});// Set the employee data based on the logged-in user\nsetEmployee(response.data);}catch(error){console.error('Error fetching employee data:',error);// Handle unauthorized access, like redirecting to login\nif(error.response.status===401){navigate('/login');}}};fetchEmployeeData();},[navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"ABC COMPANY\"}),employee&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",employee.name]}),/*#__PURE__*/_jsx(\"p\",{children:employee.email})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/profile'),className:\"button\",children:\"View Profile\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/apply-leave'),className:\"button\",children:\"Apply Leave\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/leave-history'),className:\"button\",children:\"View Leave History\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:logout,style:{marginTop:'20px'},className:\"button\",children:\"Logout\"})})]});}export default EmployeeDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","logout","jsx","_jsx","jsxs","_jsxs","EmployeeDashboard","employee","setEmployee","navigate","fetchEmployeeData","token","localStorage","getItem","response","get","headers","Authorization","data","error","console","status","className","children","name","email","onClick","style","marginTop"],"sources":["C:/Users/Asus/fyp/frontend/src/pages/employee/EmployeeDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom'; \r\nimport './styles/EmployeeDashboard.css';\r\nimport { logout } from './logout';\r\n\r\nfunction EmployeeDashboard() {\r\n  const [employee, setEmployee] = useState(null);\r\n  const navigate = useNavigate(); \r\n\r\n  useEffect(() => {\r\n    const fetchEmployeeData = async () => {\r\n      try {\r\n        // Retrieve the token from localStorage\r\n        const token = localStorage.getItem('token');\r\n        \r\n        // If no token is found, redirect to login\r\n        if (!token) {\r\n          navigate('/login');\r\n          return;\r\n        }\r\n\r\n        // Send the token in the authorization header\r\n        const response = await axios.get('http://localhost:5000/api/employees/me', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        });\r\n\r\n        // Set the employee data based on the logged-in user\r\n        setEmployee(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching employee data:', error);\r\n        // Handle unauthorized access, like redirecting to login\r\n        if (error.response.status === 401) {\r\n          navigate('/login');\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchEmployeeData();\r\n  }, [navigate]);\r\n  \r\n  return (\r\n    <div className=\"dashboard-container\"> \r\n      <h1>ABC COMPANY</h1>\r\n      {employee && (\r\n        <div>\r\n          <h2>Welcome, {employee.name}</h2>\r\n          <p>{employee.email}</p>\r\n        </div>\r\n      )}\r\n      <div>\r\n        <button onClick={() => navigate('/profile')} className=\"button\">\r\n          View Profile\r\n        </button>\r\n      </div>\r\n      <div>\r\n        <button onClick={() => navigate('/apply-leave')} className=\"button\">\r\n          Apply Leave\r\n        </button>\r\n      </div>\r\n      <div>\r\n        <button onClick={() => navigate('/leave-history')} className=\"button\">\r\n          View Leave History\r\n        </button>\r\n      </div>\r\n      <div>\r\n        <button onClick={logout} style={{ marginTop: '20px' }} className=\"button\">\r\n          Logout\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EmployeeDashboard;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,gCAAgC,CACvC,OAASC,MAAM,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,QAAS,CAAAC,iBAAiBA,CAAA,CAAG,CAC3B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAAAY,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF;AACA,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C;AACA,GAAI,CAACF,KAAK,CAAE,CACVF,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACF,CAEA;AACA,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAf,KAAK,CAACgB,GAAG,CAAC,wCAAwC,CAAE,CACzEC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUN,KAAK,EAChC,CACF,CAAC,CAAC,CAEF;AACAH,WAAW,CAACM,QAAQ,CAACI,IAAI,CAAC,CAC5B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrD;AACA,GAAIA,KAAK,CAACL,QAAQ,CAACO,MAAM,GAAK,GAAG,CAAE,CACjCZ,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CACF,CAAC,CAEDC,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAAE,CAACD,QAAQ,CAAC,CAAC,CAEd,mBACEJ,KAAA,QAAKiB,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCpB,IAAA,OAAAoB,QAAA,CAAI,aAAW,CAAI,CAAC,CACnBhB,QAAQ,eACPF,KAAA,QAAAkB,QAAA,eACElB,KAAA,OAAAkB,QAAA,EAAI,WAAS,CAAChB,QAAQ,CAACiB,IAAI,EAAK,CAAC,cACjCrB,IAAA,MAAAoB,QAAA,CAAIhB,QAAQ,CAACkB,KAAK,CAAI,CAAC,EACpB,CACN,cACDtB,IAAA,QAAAoB,QAAA,cACEpB,IAAA,WAAQuB,OAAO,CAAEA,CAAA,GAAMjB,QAAQ,CAAC,UAAU,CAAE,CAACa,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAC,cAEhE,CAAQ,CAAC,CACN,CAAC,cACNpB,IAAA,QAAAoB,QAAA,cACEpB,IAAA,WAAQuB,OAAO,CAAEA,CAAA,GAAMjB,QAAQ,CAAC,cAAc,CAAE,CAACa,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAC,aAEpE,CAAQ,CAAC,CACN,CAAC,cACNpB,IAAA,QAAAoB,QAAA,cACEpB,IAAA,WAAQuB,OAAO,CAAEA,CAAA,GAAMjB,QAAQ,CAAC,gBAAgB,CAAE,CAACa,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAC,oBAEtE,CAAQ,CAAC,CACN,CAAC,cACNpB,IAAA,QAAAoB,QAAA,cACEpB,IAAA,WAAQuB,OAAO,CAAEzB,MAAO,CAAC0B,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAO,CAAE,CAACN,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAC,QAE1E,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAjB,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}