{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'./styles/ManageLeave.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageLeave=()=>{const[leaveRequests,setLeaveRequests]=useState([]);const navigate=useNavigate();useEffect(()=>{fetchLeaveRequests();},[]);// Fetch leave requests from the backend\nconst fetchLeaveRequests=async()=>{try{const response=await axios.get('http://localhost:5000/api/leaves');setLeaveRequests(response.data);}catch(error){console.error('Error fetching leave requests:',error);}};// Approve or reject leave requests\nconst handleLeaveApproval=async(id,status)=>{try{await axios.patch(`http://localhost:5000/api/leaves/${id}`,{status});fetchLeaveRequests();// Refresh the list after approval/rejection\n}catch(error){console.error('Error updating leave status:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"manage-leave\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"LEAVE REQUESTS\"}),leaveRequests.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No leave requests so far\"}):/*#__PURE__*/_jsx(\"ul\",{children:leaveRequests.map(req=>{const startDate=new Date(req.startDate).toLocaleDateString('en-GB',{day:'numeric',month:'long',year:'numeric'});const endDate=new Date(req.endDate).toLocaleDateString('en-GB',{day:'numeric',month:'long',year:'numeric'});return/*#__PURE__*/_jsxs(\"li\",{className:`leave-request ${req.status.toLowerCase()}`,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:req.name}),\" requested \",/*#__PURE__*/_jsx(\"strong\",{children:req.leaveType}),\" from \",/*#__PURE__*/_jsx(\"strong\",{children:startDate}),\" to \",/*#__PURE__*/_jsx(\"strong\",{children:endDate}),\".\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Status: \"}),/*#__PURE__*/_jsx(\"span\",{className:`status ${req.status.toLowerCase()}`,children:req.status})]}),req.status==='Pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"approve\",onClick:()=>handleLeaveApproval(req._id,'Approved'),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"reject\",onClick:()=>handleLeaveApproval(req._id,'Rejected'),children:\"Reject\"})]})]},req._id);})}),/*#__PURE__*/_jsx(\"button\",{className:\"back-to-dashboard\",onClick:()=>navigate('/admin-dashboard'),children:\"Back to Dashboard\"})]});};export default ManageLeave;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","ManageLeave","leaveRequests","setLeaveRequests","navigate","fetchLeaveRequests","response","get","data","error","console","handleLeaveApproval","id","status","patch","className","children","length","map","req","startDate","Date","toLocaleDateString","day","month","year","endDate","toLowerCase","name","leaveType","onClick","_id"],"sources":["C:/Users/Asus/fyp/frontend/src/pages/admin/ManageLeave.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom'; \r\nimport './styles/ManageLeave.css';\r\n\r\nconst ManageLeave = () => {\r\n  const [leaveRequests, setLeaveRequests] = useState([]);\r\n  const navigate = useNavigate(); \r\n\r\n  useEffect(() => {\r\n    fetchLeaveRequests();\r\n  }, []);\r\n\r\n  // Fetch leave requests from the backend\r\n  const fetchLeaveRequests = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:5000/api/leaves');\r\n      setLeaveRequests(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching leave requests:', error);\r\n    }\r\n  };\r\n\r\n  // Approve or reject leave requests\r\n  const handleLeaveApproval = async (id, status) => {\r\n    try {\r\n      await axios.patch(`http://localhost:5000/api/leaves/${id}`, { status });\r\n      fetchLeaveRequests(); // Refresh the list after approval/rejection\r\n    } catch (error) {\r\n      console.error('Error updating leave status:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"manage-leave\">\r\n      <h2>LEAVE REQUESTS</h2>\r\n      {leaveRequests.length === 0 ? (\r\n        <p>No leave requests so far</p>\r\n      ) : (\r\n        <ul>\r\n          {leaveRequests.map(req => {\r\n            const startDate = new Date(req.startDate).toLocaleDateString('en-GB', {\r\n              day: 'numeric',\r\n              month: 'long',\r\n              year: 'numeric',\r\n            });\r\n           \r\n            const endDate = new Date(req.endDate).toLocaleDateString('en-GB', {\r\n              day: 'numeric',\r\n              month: 'long',\r\n              year: 'numeric',\r\n            });\r\n\r\n            return (\r\n              <li key={req._id} className={`leave-request ${req.status.toLowerCase()}`}>\r\n                <div>\r\n                  <strong>{req.name}</strong> requested <strong>{req.leaveType}</strong> from <strong>{startDate}</strong> to <strong>{endDate}</strong>.\r\n                </div>\r\n                <div className=\"status-container\">\r\n                  <span>Status: </span>\r\n                  <span className={`status ${req.status.toLowerCase()}`}>{req.status}</span>\r\n                </div>\r\n                {req.status === 'Pending' && (\r\n                  <div className=\"action-buttons\">\r\n                    <button className=\"approve\" onClick={() => handleLeaveApproval(req._id, 'Approved')}>Approve</button>\r\n                    <button className=\"reject\" onClick={() => handleLeaveApproval(req._id, 'Rejected')}>Reject</button>\r\n                  </div>\r\n                )}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      )}\r\n      {/* Back to Dashboard Button */}\r\n      <button className=\"back-to-dashboard\" onClick={() => navigate('/admin-dashboard')}>\r\n        Back to Dashboard\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageLeave;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}